import React from 'react';
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import LineChartComponent from '@/components/charts/LineChartComponent';

const VulnerabilityOverview = ({ task, renderProgressCards }) => (
  <>
    <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
      <Card className="glassmorphism-card md:col-span-2">
        <CardHeader><CardTitle className="text-base text-slate-400 font-normal">TESTED / MINUTE</CardTitle></CardHeader>
        <CardContent>
          <p className="text-3xl font-bold text-primary mb-2">{task.results.testedPerMinute.toLocaleString()}</p>
          <LineChartComponent data={task.graphs.testedSpeed} dataKey="speed" lineColor="hsl(var(--primary))" />
        </CardContent>
      </Card>
      <Card className="glassmorphism-card">
        <CardHeader><CardTitle className="text-base text-slate-400 font-normal">VULNERABILITIES ({task.results.totalLinks})</CardTitle></CardHeader>
        <CardContent className="space-y-1.5 text-xs overflow-y-auto max-h-[180px] pr-1">
          {task.results.vulnerabilities.map(vuln => (<div key={vuln.type} className="flex justify-between items-center"><span className="text-slate-300">{vuln.type}</span><span className={`font-semibold ${vuln.count > 0 ? 'text-primary' : 'text-slate-500'}`}>{vuln.count}</span></div>))}
        </CardContent>
      </Card>
    </div>
    {renderProgressCards()}
  </>
);

export default VulnerabilityOverview;